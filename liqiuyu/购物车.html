<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.10/dist/vue.js"></script>
    <script src="https://unpkg.com/vue-router@2.0.0/dist/vue-router.js"></script>

    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            user-select: none;
        }
        
        ul li {
            list-style: none;
        }
        
        .clearfix:after,
        .clearfix:before {
            content: '';
            display: table;
        }
        
        .clearfix:after {
            clear: both;
        }
        
        .clearfix {
            zoom: 1;
        }
        
        .fl {
            float: left;
        }
        
        .fr {
            float: right;
        }
        
        #app {
            width: 500px;
            border: 1px solid #eee;
            margin: 0 auto;
        }
        
        .head {
            height: 50px;
            line-height: 50px;
            border-bottom: 1px solid #eee;
            text-align: center;
        }
        
        .head p {
            display: inline-block;
        }
        
        .cont {
            min-height: 450px;
        }
        
        .search {
            font-size: 20px;
            line-height: 50px;
            padding-right: 10px;
        }
        
        .nav a {
            width: 25%;
            height: 40px;
            float: left;
            text-align: center;
            line-height: 40px;
            border-bottom: 1px solid #eee;
            color: #666;
            text-decoration: none;
        }
        
        .lists li {
            width: 125px;
            height: 40px;
            line-height: 40px;
            border-bottom: 1px solid #eee;
            text-align: center;
        }
        
        .br {
            border-right: 1px solid #eee;
        }
        
        .bor {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 1px solid #ccc;
            border-radius: 50%;
            text-align: center;
            line-height: 20px;
            color: #999;
            font-size: 18px;
        }
        
        .item li {
            width: 373px;
            border-bottom: 1px solid #eee;
            padding-right: 10px;
            padding-top: 10px;
        }
        
        .yellow {
            color: rgb(201, 162, 89);
        }
        
        .image img {
            width: 100px;
            height: 70px;
        }
        
        .pl {
            width: 260px;
            padding-left: 10px;
        }
        
        .footer {
            width: 100%;
            height: 50px;
            line-height: 50px;
            background: rgb(224, 235, 245);
            padding: 0 0 0 10px;
            box-sizing: border-box;
        }
        
        .all-price {
            font-size: 18px;
            float: left;
            color: #666;
        }
        
        .footer a {
            float: right;
            width: 80px;
            height: 50px;
            background: rgb(216, 219, 222);
            color: #666;
            text-decoration: none;
            text-align: center;
        }
        
        .indent {
            width: 500px;
            min-height: 600px;
            border: 1px solid #eee;
            margin: 0 auto;
            background: linear-gradient(rgb(56, 158, 254), #fff 40%);
            position: relative;
        }
        
        .indent_head p {
            height: 45px;
            width: 100%;
            line-height: 45px;
            background: #fff;
            font-size: 16px;
        }
        
        .indent_head p a {
            display: inline-block;
            height: 45px;
            text-decoration: none;
            color: #666;
        }
        
        .arrow {
            color: rgb(111, 159, 236);
            font-weight: bold;
            margin: 0 10px;
            font-size: 20px;
        }
        
        .indent_content {
            width: 96%;
            margin: 0 auto;
            background: #fff;
            padding: 0 20px;
        }
        
        .indent_content h5 {
            height: 50px;
            line-height: 50px;
            border-bottom: 1px solid #ddd;
            font-weight: bold;
            font-size: 16px;
        }
        
        .indent_content ul li {
            min-height: 80px;
            padding: 10px 0;
            border-bottom: 1px dotted #ddd;
        }
        
        .indent_content ul li img {
            width: 60px;
            height: 60px;
            margin-right: 10px;
        }
        
        .indent_content .indent_content_title {
            width: 280px;
            display: inline-block;
            text-align: left;
        }
        
        .indent_content .indent_content_title span {
            font-size: 14px;
            display: block;
            text-align: left;
        }
        
        .indent_content_price {
            width: 60px;
            margin-left: 20px;
        }
        
        .indent_content p {
            width: 100%;
            text-align: right;
        }
        
        .indent_content p span {
            font-size: 20px;
        }
        
        .indent_foot {
            width: 100%;
            height: 50px;
            background: rgb(37, 37, 37);
            position: absolute;
            bottom: 0;
            color: #fff;
            line-height: 50px;
            padding-left: 10px;
        }
        
        .indent_foot button {
            width: 80px;
            height: 50px;
            background: rgb(45, 209, 127);
            border: 0;
            position: absolute;
            right: 0;
            top: 0;
            outline: 0;
        }
    </style>
</head>

<body>
    <div id="app">
        <router-view></router-view>
    </div>
    <template id="selectGoods">
        <div>
            <div class="head clearfix">
                    <p class="tit">派送至: <span>北京石景山<span class="glyphicon glyphicon-triangle-bottom" style="color: #999;"></span></span>
                    </p>
                    <span class="glyphicon glyphicon-search fr search" style="color: #999;"></span>
                </div>
                <div class="nav clearfix">
                    <a href="#" class="br">热销新品</a>
                    <a href="#">综合排序</a>
                    <a href="#">按价格<span class="glyphicon glyphicon-triangle-bottom" style="color: #999;font-size: 10px;margin-left: 10px;"></span></a>
                    <a href="#">分类</a>
                </div>
                <div class="cont clearfix">
                    <ul class="lists fl">
                        <li class="br" v-for="item,index in list" @click="sort(index)" ref="list_li">
                            {{item.type}}
                        </li>
                    </ul>
                    <ul class="item fl">
                        <li class="clearfix" v-for="o,i in list[list_index].goodslist">
                            <div class="fl image">
                                <img :src="o.url" alt="">
                            </div>
                            <div class="clearfix pl fl">
                                <p>{{o.title}}</p>
                                <div class="clearfix">
                                    <span class="fl yellow">{{o.price}}</span>
                                    <p class="fr">
                                        <span class="bor" @click="delCart(o)">-</span>
                                        <span>{{o.num||0}}</span>
                                        <span class="bor" @click="addCart(o)">+</span>
                                    </p>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <div class="footer clearfix">
                    <p class="all-price">
                        总计：<span>￥{{total}}</span>
                    </p>
                    <router-link :to="{name:'shoppingCart',params:{seleteList,total}}">结算</router-link>
                </div>
        </div>
    </template>
    <template id="shop">
        <div class="indent">
            <div class="indent_head">
                <p><router-link to="/goodslist"><span class="arrow"><</span>确认订单</router-link></p>
            </div>
            <div class="indent_content">
                <h5>店铺名</h5>
                <ul>
                    <li v-for="lists in $route.params.seleteList">
                        <img :src="lists.url" >
                        <p class="indent_content_title"> 
                            {{lists.title}}
                            <span>商品个数 ：{{lists.num}}</span>
                            <span>单价 ：{{lists.price}}</span>
                        </p>
                        <span class="indent_content_price">￥{{lists.num*lists.price}}</span>
                    </li>
                </ul>
                <p>小计￥<span>{{$route.params.total}}</span></p>
            </div>
            <div class="indent_foot">
                <p>
                    ￥<span>{{$route.params.total}}</span>
                </p>
                <button>去支付</button>
            </div>
        </div>
    </template>
</body>
<script>
    var selectGoods = {
        template: '#selectGoods',
        data() {
            return {
                src: '',
                list_index: '0',
                list: [{
                    type: '优选水果',
                    goodslist: [{
                        url: 'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1025018057,4086903013&fm=26&gp=0.jpg',
                        title: '新鲜青柠5000/皇新鲜特价新鲜特价新鲜特价',
                        price: '12.8',
                    }, {
                        url: 'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1025018057,4086903013&fm=26&gp=0.jpg',
                        title: '新鲜青柠5000/皇新鲜特价新鲜特价新鲜特价',
                        price: '15.8',
                    }, {
                        url: 'https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=1025018057,4086903013&fm=26&gp=0.jpg',
                        title: '新鲜青柠5000/皇新鲜特价新鲜特价新鲜特价',
                        price: '18.8',
                    }]
                }, {
                    type: '休闲零食',
                    goodslist: [{
                        url: 'https://ss1.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=907f6e689ddda144c5096ab282b6d009/dc54564e9258d1092f7663c9db58ccbf6c814d30.jpg',
                        title: '新鲜青柠5000/皇新鲜特价新鲜特价新鲜特价',
                        price: '11.8',
                    }, {
                        url: 'https://ss1.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=907f6e689ddda144c5096ab282b6d009/dc54564e9258d1092f7663c9db58ccbf6c814d30.jpg',
                        title: '新鲜青柠5000/皇新鲜特价新鲜特价新鲜特价',
                        price: '13.8',
                    }, {
                        url: 'https://ss1.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=907f6e689ddda144c5096ab282b6d009/dc54564e9258d1092f7663c9db58ccbf6c814d30.jpg',
                        title: '新鲜青柠5000/皇新鲜特价新鲜特价新鲜特价',
                        price: '￥16.8',
                    }]
                }, {
                    type: '方便速食',
                    goodslist: [{
                        url: 'https://ss1.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=a9e671b9a551f3dedcb2bf64a4eff0ec/4610b912c8fcc3cef70d70409845d688d53f20f7.jpg',
                        title: '新鲜青柠5000/皇新鲜特价新鲜特价新鲜特价',
                        price: '11',
                    }, {
                        url: 'https://ss1.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=a9e671b9a551f3dedcb2bf64a4eff0ec/4610b912c8fcc3cef70d70409845d688d53f20f7.jpg',
                        title: '新鲜青柠5000/皇新鲜特价新鲜特价新鲜特价',
                        price: '18',
                    }, {
                        url: 'https://ss1.baidu.com/-4o3dSag_xI4khGko9WTAnF6hhy/image/h%3D300/sign=a9e671b9a551f3dedcb2bf64a4eff0ec/4610b912c8fcc3cef70d70409845d688d53f20f7.jpg',
                        title: '新鲜青柠5000/皇新鲜特价新鲜特价新鲜特价',
                        price: '20',
                    }]
                }, ]
            }
        },
        mounted() {
            this.sort(0);
        },
        computed: {
            seleteList() {
                var arr = [];
                this.list.forEach(element => {
                    if (element.goodslist && element.goodslist.length > 0) {
                        element.goodslist.forEach(el => {
                            if (el.num) {
                                arr.push(el);
                            }
                        })
                    }
                });
                return arr;
            },
            total() {
                var n = 0;
                this.seleteList.forEach(element => {
                    n += element.price * element.num;
                })
                return n.toFixed(2);
            }
        },
        methods: {
            sort(index) {
                for (var i = 0; i < this.$refs.list_li.length; i++) {
                    this.$refs.list_li[i].style.borderLeft = '0';
                }
                this.$refs.list_li[index].style.borderLeft = '2px solid orange';
                this.list_index = index;
            },
            addCart(o) {
                if (o.num) {
                    o.num++;
                } else {
                    this.$set(o, 'num', 1)
                }
            },
            delCart(o) {
                if (o.num) {
                    // if (o.num == 0) return
                    o.num--;
                }
            }
        }
    }
    var shoppingCart = {
        // template: `<div>{{$route.params}}</div>`,
        template: '#shop',

    }
    var router = new VueRouter({
        routes: [{
            path: '/goodslist',
            component: selectGoods
        }, {
            path: '/shoppingCart',
            name: 'shoppingCart',
            component: shoppingCart
        }]
    })

    var vm = new Vue({
        el: '#app',
        router
    })
</script>

</html>