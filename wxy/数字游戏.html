<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        #app>div> {
            border: 1px solid #000;
        }

        #app>div>div {
            width: 100px;
            height: 100px;
            display: inline-block;
            box-sizing: border-box;
            vertical-align: top;
            text-align: center;
            line-height: 100px;
            border: 1px solid #000;
        }
    </style>
</head>

<body>
    <script src="vue.js"></script>
    <div id="app">
        <button @click='three'>3*3</button>
        <button @click='four'>4*4</button>
        <button @click='six'>6*6</button>
        <button @click='seven'>7*7</button>
        <div :style="{width:100*n+'px',height:100*n+'px'}">
            <div v-for="i,index in arr" @click="move(i,index)">
                {{i}}
            </div>
        </div>
    </div>
    <script>
        new Vue({
            el: '#app',
            data: {
                arr: [1, 2, 3, 4, 5, 6, 7, 8, ''],
                n: 3
            },
            methods: {
                move(i, index) {
                    var currentIndex = index;
                    var vacanay;
                    this.arr.forEach((element, index) => {
                        if (element == '') {
                            vacanay = index;
                        }
                    });
                    if (this.isCanMove(currentIndex, vacanay)) {
                        this.$set(this.arr, index, '');
                        Vue.set(this.arr, vacanay, i);
                    }
                },
                isCanMove(currentIndex, vacanay) {
                    if (currentIndex % 3 == 0) {
                        return (currentIndex + 1 == vacanay || currentIndex - 3 == vacanay || currentIndex +
                            3 == vacanay)
                    } else if ((currentIndex + 1) % 3 == 0) {
                        return (currentIndex - 1 == vacanay || currentIndex - 3 == vacanay || currentIndex +
                            3 == vacanay)
                    } else {
                        return (currentIndex + 1 == vacanay || currentIndex - 1 == vacanay || currentIndex -
                            3 == vacanay || currentIndex + 3 == vacanay)
                    }
                },
                three() {
                    this.n = 3;
                    this.arr = [];
                    for (var i = 0; i < this.n * this.n; i++) {
                        this.arr.push(i + 1);
                    }
                    this.arr.splice(this.arr.indexOf([this.arr.length - 1]), 1, '')
                    this.arr.sort(() => Math.random() - 0.5);
                },
                four() {
                    this.n = 4;
                    this.arr = [];
                    for (var i = 0; i < this.n * this.n; i++) {
                        this.arr.push(i + 1);
                    }
                    this.arr.splice(this.arr.indexOf([this.arr.length - 1]), 1, '')
                    this.arr.sort(() => Math.random() - 0.5);
                },
                six() {
                    this.n = 6;
                    this.arr = [];
                    for (var i = 0; i < this.n * this.n; i++) {
                        this.arr.push(i + 1);
                    }
                    this.arr.splice(this.arr.indexOf([this.arr.length - 1]), 1, '')
                    this.arr.sort(() => Math.random() - 0.5);
                },
                seven() {
                    this.n = 7;
                    this.arr = [];
                    for (var i = 0; i < this.n * this.n; i++) {
                        this.arr.push(i + 1);
                    }
                    this.arr.splice(this.arr.indexOf([this.arr.length - 1]), 1, '')
                    this.arr.sort(() => Math.random() - 0.5);
                }
            },
        })
    </script>
</body>

</html>